<!DOCTYPE html>
<html>
  <head>
    <!-- <meta name="viewport" content="width=device-width, initial-scale=0.5, maximum-scale=1.0, user-scalable=0"/> -->
    <title>Clingo Exercises</title>
    <script src="exercises.js" type="text/javascript" charset="utf-8"></script>
    <link rel="stylesheet" href="colors.css">
    <link href="FredokaOne-Regular.ttf" rel="stylesheet">
    <script src="githubDatabase.js" type="text/javascript" charset="utf-8"></script>
  <style>

div{
   border-radius: 20px;
   background: var(--div);
}

.text{
  padding: 10px;
}
.hidden{
    display: none;
}

#shortcutInfo{
position: absolute;
bottom:10px;
color: var(--offWhite);
}

#task{
color: var(--task);
}
#tip{
color: var(--tip);
}
#tipButton{
background-color: var(--tip);
}

#solution,#solutionButton{
color: var(--solution);
}

#solution{
padding-top: 20px;
}


#menuButton {
  position: absolute;
  left: 0px;
  top: 0px;
}

#commentsButton{
  position: absolute;
  right: 0px;
  top: 0px;
}

#backwardButton, #forwardButton{
   border-radius: 100%;
   aspect-ratio: 1;
   margin: 0px;
}


#backwardButton img,#forwardButton img{
  height: 20px;
  padding-top: 5px;  
  opacity: 0.5;
  /*background-color: rgba(255, 0, 0, 0.5); */
}
#backwardButton img{
  padding-right: 3px;
}

#forwardButton img{
  padding-left: 3px;
}

#forwardButton{
   float: right;
}


#tipButton img{
  height: 20px;
  opacity: 0.5;
  /*filter : hue-rotate(180deg);*/
}


#exerciseContainer{
    height: 60vh;
    padding: 15px;
    /*drop-shadow(#e23 0.5rem 0.5rem 1rem);*/
    /*padding-top: 20px;*/

}


#container{
  margin: 0;
  position: relative;
  top: 10%;
  /*transform: translateY(-10%);*/
  /*max-width: 80%;*/
  /*width: 60hv;*/
  width: 60vw;
  /*margin: 20px;*/
  padding: 7px;
   box-shadow: 10px 10px 5px 12px rgba(0, 0, 0, 0.5);


}



#textContainer{
  margin-top: 10px;
  margin-right: 10px;
  margin-left: 0px;
}






  </style>
  </head>
<body>

  <button id="menuButton">Menu</button>
  <button id="commentsButton">Comments</button>


<div id="container">
  <div id="exerciseContainer">
    <button id="tipButton"><img src="icons/tip.png"></button><!-- Tip -->
    <button id="solutionButton" class="">Solution</button>
    <button id="nextExerciseButton" class="hidden">Next Exercise</button>

  <div id="textContainer">
    <div class="text" id="task">Exercise 1: Write a program that represents the colors red, green, and blue as Clingo atoms.</div>
    <div class="text" id="tip"></div>
    <div class="text" id="solution"></div>
  </div>
</div>
<button id="backwardButton"><img src="icons/backward.png"/></button> <!-- ðŸ œ  -->
<button id="forwardButton"><img src="icons/forward.png"/></button><!-- ðŸ ž -->

</div>


<span id="shortcutInfo"> Keyboard shortcuts: Tip [T or Space] Solution [S or Enter] Next Exercise [Arrow Right or D] Previous Exercise [Arrow Left or A] </span>


  <script>



    function hideElementByID(id,hide = true){

      if(hide == true){
        document.getElementById(id).classList.add('hidden');
      }else{
        document.getElementById(id).classList.remove('hidden');
      }
        
    }

    const DEV = true;


    if(DEV == false){
    hideElementByID('commentsButton');
    }

    hideElementByID('tip');
    hideElementByID('solution');

    document.getElementById('menuButton').addEventListener('click',function(){  window.location.href = 'ExerciseSelection.html'});
    // document.getElementById('commentsButton').addEventListener('click',function(){  window.location.href = 'Comments.html'});
    document.getElementById('commentsButton').addEventListener('click',function(){  window.open('Comments.html', '_blank').focus(); });





    const urlParams = new URLSearchParams(window.location.search);
    const exerciseParameter = urlParams.get('exercise');
    let exerciseIndex = exerciseParameter-1;

    if(exerciseParameter == undefined || exerciseIndex < 0){
      exerciseIndex = 0;
    }

    // console.log(exerciseIndex);

    const exercise = exercises[exerciseIndex];
    // console.log(exercise);

    if (exercise.tip == "") {
          hideElementByID('tipButton');
    }


    document.getElementById('task').innerHTML = exercise.task;
    document.getElementById('tip').innerHTML = exercise.tip;


    let solution = exercise.solution;
    solution = solution.trim().split("\n").join('<br>');;
    document.getElementById('solution').innerHTML = solution;

 

    document.getElementById('tipButton').addEventListener('click',function(){hideElementByID('tip',false);});
    document.getElementById('solutionButton').addEventListener('click',function(){ hideElementByID('solution',false);});


 
    function loadExercise(index){

      if(index < 0 || index == exercises.length){
        return;
      }

      const indexParameter = index + 1; 
      window.location.href = 'Exercise.html?exercise=' + indexParameter;
    }




    document.getElementById('backwardButton').addEventListener('click',function(){ loadExercise(exerciseIndex-1); });
    document.getElementById('forwardButton').addEventListener('click',function(){ loadExercise(exerciseIndex+1); });



    if (exerciseIndex == 0) {
      hideElementByID('backwardButton');
        }

    if (exerciseIndex == exercises.length - 1) {
      hideElementByID('forwardButton');

        }



  const isMobile = (navigator.maxTouches > 0 && /Android|iPhone/i.test(navigator.userAgent));


  if(isMobile){
    hideElementByID('shortcutInfo');
  }

    




  document.addEventListener('keydown', function(event) {
   
    if (event.key === 'ArrowLeft'||event.key === 'a' || event.key === 'A') {
      console.log("LEFT");
         loadExercise(exerciseIndex-1);
    }
    

    if (event.key === 'ArrowRight'||event.key === 'd' || event.key === 'D') {
         console.log("ArrowRight");
      loadExercise(exerciseIndex+1);
    }

    if (event.key === 't' || event.key === 'T'|| event.key === ' ') {
        document.getElementById('tip').classList.remove('hidden');
    }


    if (event.key === 's' || event.key === 'S'|| event.key === 'Enter' ) {
        document.getElementById('solution').classList.remove('hidden');
    }
});

  </script>

</body>
</html>